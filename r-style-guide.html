<html>
<head>
  <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.7.0/build/reset-fonts-grids/reset-fonts-grids.css">
  <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.7.0/build/base/base-min.css"> 
  
  <script type="text/javascript" src="jquery-1.3.2.min.js"></script>
  <script type="text/javascript">
  $(document).ready(function() {
      $("#nav").css("position", "absolute");
  });
  $(window).scroll(function() {
      $("#nav").animate({top: $(window).scrollTop() + "px"}, {queue: false});
  });
  </script>

  <style>
  #bd {font-size: 116%;}
  code.bad {color: red;}

  #yui-main h2 {
    margin-top: 2em;
    border-bottom: 1px solid #ccc;
  }
  
  h3 {font-size: 1em; margin-bottom: 0.25em; margin-top: 1.5em;}

  .example {
    background-color: #eee; 
    border: 1px solid #ccc;
    margin-bottom: 1em;
    font-size: 93%;
  }
  dl {margin-left: 1em;}
  dl dd {margin-left: 0; margin-bottom: 0.5em;}
  dl dt {margin-top: 1em;}
  
  #nav ul {margin-left: 0;}
  #nav ul li {list-style: none; margin-bottom: 0.5em;}
  
  </style>
  
  <title>R style guide</title>
  
</head>

<body>
  
<div id="doc" class="yui-t5">
<div id="bd">
<div id="yui-main">
<div class="yui-b"><div class="yui-g">


<h1>R style guide</h1>

<p>Based on Google's <a href="http://google-styleguide.googlecode.com/svn/trunk/google-r-style.html">R style guide.</a></p>

<h2>Why is style important?</h2>

<p>Good coding style is like using correct punctuation when writing: you can manage without it, but it sure makes things easier to read. As with punctuation, there are many possible variations.  The importance is in consistency.  After this class you are free to develop your own style, but these rules will make sure everybody starts off in the same place.</p>
  
<p>Writing code for communication is important because in this class your code will have one author (you!) but multiple readers:</p>

<ul>
  <li>You, when you're writing it.</li>
  <li>Me, when I'm grading it.</li>
  <li>Your group members, during projects.</li>
  <li>Future you, when you look at this code in 6 months time.</li>
</ul>

<p>Make sure to read the code grading rubric thoroughly to ensure that you don't lose marks for silly mistakes.  It will be hard at first, but you'll get used to it pretty quickly.</p>

<h2>Notation and naming</h2>

<h3 id="filenames">File names</h3>

<p>File names should end in <code>.r</code> and be meaningful.</p>

<p>When handing in an electronic copy of your assignment code, put your files in a directory called <code>firstname-lastname-hw-x</code> then email me a zip of that directory.<p>
 
<div class="example"> 
  <dl>
    <dt>Good</dt>
    <dd><code>explore-diamonds.r</code></dd>
    <dd><code>hadley-wickham-hw-1.r</code></dd>
    <dt>Bad</dt>
    <dd><code class="bad">foo.r</code></dd>
    <dd><code class="bad">my-homework.R</code></dd>
  </dl>
</div>

<h3 id="identifiers">Identifiers</h3>

<p>Variable and function names should be lowercase. Use <code>_</code> to separate words within a name. Generally, variable names should be nouns and function names should be verbs. Strive for concise but meaningful names (this is not easy!)</p>

<div class="example"> 
  <dl>
    <dt>Good</dt>
    <dd><code>day_one</code></dd>
    <dd><code>day_1</code></dd>
    <dt>Bad</dt>
    <dd><code class="bad">first_day_of_the_month</code></dd>
    <dd><code class="bad">DayOne</code></dd>
    <dd><code class="bad">dayone</code></dd>
    <dd><code class="bad">djm1</code></dd>
  </dl>
</div>

<h2>Syntax</h2>


<h3 id="spacing">Spacing</h3>

<p>Place spaces around all binary operators (<code>=</code>, <code>+</code>, <code>-</code>, <code>&lt;-</code>, etc.). Do not place a space before a comma, but always place one after a comma.</p>

<div class="example"> 
  <dl>
    <dt>Good</dt>
    <dd><code> average &lt;- mean(feet / 12 + inches, na.rm = T) </code></dd>
    <dt>Bad</dt>
    <dd><code class="bad">average&lt;-mean(feet/12+inches,na.rm=T)</code></dd>
  </dl>
</div>

<p>Place a space before left parentheses, except in a function call.</p>

<div class="example"> 
  <dl>
    <dt>Good</dt>
    <dd><code>if (debug)</code></dd>
    <dd><code>plot(x, y)</code></dd>
    <dt>Bad</dt>
    <dd><code class="bad">if(debug)</code></dd>
    <dd><code class="bad">plot (x, y)</code></dd>
  </dl>
</div>

<p>Extra spacing (i.e., more than one space in a row) is okay if it improves alignment of equals signs or arrows (<code>&lt;-</code>).</p>

<div class="example">
<pre>
<code>list(
  x = call_this_long_function(a, b), 
  y = a * e / d ^ f)
</code></pre>
<pre>
<code>list(
  total = a + b + c, 
  mean  = (a + b + c) / n)
</code></pre>
</div>

<p>Do not place spaces around code in parentheses or square brackets. (Except if there's a trailing comma: always place a space after a comma.)</p>

<div class="example"> 
  <dl>
    <dt>Good</dt>
    <dd><code>if (debug)</code></dd>
    <dd><code>diamonds[5, ]</code></dd>
    <dt>Bad</dt>
    <dd><code class="bad">if ( debug )  # No spaces around debug</code></dd>
    <dd><code class="bad">x[1,]  # Needs a space after the comma</code></dd>
    <dd><code class="bad">x[1 ,]  # Space goes after, not before</code></dd>
  </dl>
</div>

<h3 id="curlybraces">Curly braces</h3>

<p>An opening curly brace should never go on its own line and should always be followed by a new line; a closing curly brace should always go on its own line, unless followed by <code>else</code>.</p>

<p>Always indent the code inside the curly braces.</p>


<div class="example"> 
  <dl>
    <dt>Good</dt>
    <dd><pre>
<code>
if (y &lt; 0 &amp;&amp; debug) {
  message("Y is negative")
}

if (y == 0) {
  log(x)
} else {
  y ^ x
}
</code></pre></dd>
    <dt>Bad</dt>
    <dd><pre>
<code class="bad">
if (y &lt; 0 &amp;&amp; debug)
message("Y is negative")

if (y == 0) {
  log(x)
} 
else {
  y ^ x
}
</code></pre></dd>
    <dd><pre>
<code class="bad">
if (y &lt; 0 &amp;&amp; debug) message("Y is negative")
</code></pre></dd>
  </dl>
</div>

<h3 id="indentation">Indentation</h3>

<p>When indenting your code, use two spaces. Never use tabs or mix tabs and spaces. </p>

<h3 id="linelength">Line length</h3>

<p>Keep your lines less than 80 characters.  This is the amount that will fit comfortably on a printed page at a reasonable size. If you find you are running out of room, this is probably an indication that you should encapsulate some of the work in a separate function.</p>

<h3 id="assignment">Assignment</h3>

<p>Use <code>&lt;-</code>, not <code>=</code>, for assignment.</p>

<div class="example"> 
  <dl>
    <dt>Good</dt>
    <dd><code>x &lt;- 5</code></dd>
    <dt>Bad</dt>
    <dd><code class="bad">x = 5</code></dd>
  </dl>
</div>

<h2>Organization</h2>


<h3 id="comments">Commenting guidelines</h3>

<p>Comment your code. Entire commented lines should begin with <code>#</code> and one space. Comments should explain the why, not the what.</p>

<p>Use commented lines of <code>-</code> and <code>=</code> to break up your files into scanable chunks</p>

<!-- <h3 id="functiondefinition">Function definitions and calls</h3>

<p>Function definitions should first list arguments without default values, followed by those with default values.</p>

<p>In both function definitions and function calls, multiple arguments per line are ok, but make sure to put line breaks between arguments.</p>

<div class="example"> 
  <dl>
    <dt>Good</dt>
    <dd><pre>
<code>PredictCTR &lt;- function(query, property, numDays,
                       showPlot = TRUE)</code></pre></dd>
    <dt>Bad</dt>
    <dd><pre>
<code class="bad">PredictCTR &lt;- function(query, property, numDays, showPlot =
                           TRUE)
</code></pre></dd>
  </dl>
</div> -->

<h2>References</h2>

<p><a href="http://www.maths.lth.se/help/R/RCC/">http://www.maths.lth.se/help/R/RCC/</a> - R Coding Conventions<br />
<a href="http://ess.r-project.org/">http://ess.r-project.org/</a> - For emacs users. This runs R in your emacs and has an emacs mode. </p>

</div>
</div>
</div>

<div class="yui-b">
  <div id="nav">
    <h2>Contents</h2>

    <ul>
      <li><a href="#filenames">File names</a> end in <code>.r</code></li>

      <li><a href="#identifiers">Identifiers</a> use _ to separate words</li>
      <li>Put <a href="#spacing">spaces</a> around binary operators and after commas.</li>
    
      <li>The first <a href="#curlybraces">curly braces</a> should go on the same line and last on its own line (unless followed by <code>else</code>).  Always indent code inside braces.</li>

      <li>Use spaces, not tabs, when <a href="#indentation">indenting</a>.</li>

      <li><a href="#linelength">Line length</a> should be less than 80 characters</li>

      <li><a href="#assignment">Assignment</a>: use <code>&lt;-</code>, not <code>=</code></li>

      <li>Use <a href="#comments">comments</a> to explain why, not what or how.</li>

      <!-- <li><a href="#functiondefinition">Function definitions and calls</a></li> -->
    </ul>  
  </div>
</div>
</div>

</div>


</body>
</html>
